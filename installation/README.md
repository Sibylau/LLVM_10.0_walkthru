# LLVM 12.0.0 Installation

## Install CMake (requires CMake version higher than 3.12.0) 
 - ``$wget https://github.com/Kitware/CMake/releases/download/v3.18.0/cmake-3.18.0-Linux-x86_64.tar.gz``
 - ``$tar -xvf cmake-3.18.0-Linux-x86_64.tar.gz``
 - add ``./cmake-3.18.0-Linux-x86_64/bin`` into PATH (to override the default cmake path)

## Install LLVM using CMake
 - Checkout LLVM (including related subprojects like Clang):
``$git clone https://github.com/llvm/llvm-project.git``
 - ``$cd llvm-project``  
 ``$mkdir build``  
 ``$cd build``  
 - ``$cmake -DLLVM_ENABLE_PROJECTS="clang" -DCMAKE_INSTALL_PREFIX=directory -DCMAKE_CXX_COMPILER=/usr/local/bin/g++ -DCMAKE_C_COMPILER=/usr/local/bin/gcc -DCMAKE_CXX_STANDARD=14 ../llvm``
 - ``$cmake --build . -jN``
 - ``$cmake -DCMAKE_INSTALL_PREFIX=/tmp/llvm -P cmake_install.cmake``
 - add llvm bin to PATH: ``$export PATH=$PATH:/llvm/installation/path/bin/``

## CMake
CMake does not build the project, instead it generates the files needed by the build tool. Cmake allows you to specify which build tool you use, and if not specified, cmake will guess which tool you use according to the environment. Once it identifies your building tool, cmake will use the corresponding *Generator* to create files for your build tool.  
 - To specify the generator use ``$cmake -G [name_of_generator]``.  
 - To view the list of generator type ``$cmake --help``. To view the help of a variable, type ``$cmake --help-variable VARIABLE_NAME``  

Generators' names are case-sensitive and may contain spaces, e.g. ``$cmake -G "Visual Studio 12" path/to/llvm/source/root``

Specify variable values to customize how the build files will be generated. Variables are stored in cmake cache -- ``CMakeCache.txt`` at the root of the build directory generated by cmake.
 - Define a variable value by ``$cmake -DVARIABLE=value path/to/llvm/source``
 - You can set a variable value after the initila CMake command, and reset a variable by ``$cmake -UVARIABLE path/to/llvm/source``
 - specify type by ``cmake -DVARIABLE:TYPE=value path/to/llvm/source``

### Frequently used CMake variables
 - CMAKE_BUILD_TYPE: string, [Release, Debug, RelWithDebInfo and MinSizeRel]
 - CMAKE_INSTALL_PREFIX: path, where LLVM will be installed
 - LLVM_TARGETS_TO_BUILD: string, targets, case-sensitive
 - LLVM_DIR: path, where LLVMConfig.cmake is found

### CMake Caches
 - ``$cake -C <path to cache file> <path to source>``
 - ``-D`` will define variables and override cache file settings



## References
1. Quick Start: http://llvm.org/docs/CMake.html#quick-start
2. Details on installation: http://llvm.org/docs/GettingStarted.html
3. CMake basics http://llvm.org/docs/CMake.html#basic-cmake-usage

